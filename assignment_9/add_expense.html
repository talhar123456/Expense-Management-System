<html>

<head>
    <title>
        Add Expense
    </title>

    <link rel="stylesheet" type="text/css" href="./add_expense.css">
</head>

<body>
    <div class="div_heading">
        <div class="div_heading_1_left">
            <div class="div_sample">
                <img src="./expense.png" width="100%" height="100%">
            </div>
        </div>
        <div class="div_heading_1_right">
            <div class="div_heading_1_right_welcome">
                <div class="div_heading_1_right_welcome_user">
                </div>

                <div class="div_heading_1_right_welcome_logout">
                    <input type="button" class="button_1" value="Log Out">
                </div>
            </div>
        </div>

        <div class="div_heading_2">
            Welcome To Expense Management System
        </div>
        <br><br><br><br><br>
        <div class="div_all_expenses">
            Add Expense
        </div>
        <br>
        <div class="div_body">
            <form onsubmit="return add()">
                <br>
                <label>Description:</label>
                <br><br>
                <input type="text" id="description" placeholder="Enter Description">
                <br><br>
                <label>Amount:</label>
                <br><br>
                <input type="text" id="amount" placeholder="Enter Amount">
                <br><br>
                <label>Catagory:</label>
                <br><br>
                <input type="text" id="catagory" placeholder="Select Catagory">
                <br><br>
                <div class="div_add">
                    <input type="submit" class="div_add_button" value="Add">
                    <br>
                    <h4>Back to Dashboard</h4>
                </div>
            </form>
        </div>

        <script>
            let add = e => {
                let min = 1;
                let max = 99999;
                let id = Math.floor(Math.random() * (max * min) + min);

                let description = document.querySelector("#description").value
                let amount = document.querySelector("#amount").value
                let catagory = document.querySelector("#catagory").value

                let rightNow = new Date();
                let h = rightNow.getHours();
                let m = rightNow.getMinutes();
                let s = rightNow.getSeconds();
                let y = rightNow.getFullYear();
                let m1 = rightNow.getMonth();
                let d = rightNow.getDate();
                let session = 'AM';

                if (h > 12) {
                    h = h - 12;
                    session = 'PM';
                }
                let Created_On = d + " / " + m1 + " / " + y + ",  " + h + " : " + m + " : " + s + session;


                let all_expense = localStorage.getItem("all_expense");

                if (all_expense == null) {
                    all_expense = [];

                } else {
                    all_expense = JSON.parse(all_expense);
                }

                let all_exp = {
                    id,
                    description,
                    amount,
                    catagory,
                    Created_On
                };
                alert("55555555555555")

                console.log(all_exp);
                all_expense.push(all_exp);

                all_expense = JSON.stringify(all_expense);

                localStorage.setItem("all_expense", all_expense);
                //array all_expense

                localStorage.setItem("user", JSON.stringify(all_exp));
                //object user

                return false;
            }
        </script>
</body>

</html>