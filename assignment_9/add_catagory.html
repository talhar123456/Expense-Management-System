<html>

<head>
    <title>
        Add Catagory
    </title>

    <link rel="stylesheet" type="text/css" href="./add_expense.css">
</head>

<body>
    <div class="div_heading">
        <div class="div_heading_1_left">
            <div class="div_sample">
                <img src="./expense.png" width="100%" height="100%">
            </div>
        </div>
        <div class="div_heading_1_right">
            <div class="div_heading_1_right_welcome">
                <div class="div_heading_1_right_welcome_user">
                </div>

                <div class="div_heading_1_right_welcome_logout">
                    <input type="button" class="button_1" value="Log Out">
                </div>
            </div>
        </div>

        <div class="div_heading_2">
            Welcome To Expense Management System
        </div>
        <br><br><br><br><br>
        <div class="div_all_expenses">
            Add Expense
        </div>
        <br>
        <div class="div_body">
            <br>
            <label>Description:</label>
            <br><br>
            <input type="text" id="catagory" required="required" placeholder="Enter Description">
            <br><br>
            <div class="div_add">
                <form onsubmit="return add()">
                    <input type="submit" class="div_add_button" value="Add">
                </form>
                <br>
                <h4>Back to Dashboard</h4>
            </div>
        </div>

        <script>
            let add = e => {
                let min = 1;
                let max = 99999;
                let id = Math.floor(Math.random() * (max * min) + min);

                let catagory = document.querySelector("#catagory").value

                let rightNow = new Date();
                let h = rightNow.getHours();
                let m = rightNow.getMinutes();
                let s = rightNow.getSeconds();
                let y = rightNow.getFullYear();
                let m1 = rightNow.getMonth();
                let d = rightNow.getDate();
                let session = 'AM';

                if (h > 12) {
                    h = h - 12;
                    session = 'PM';
                }
                let Created_On = d + " / " + m1 + " / " + y + ",  " + h + " : " + m + " : " + s + session;


                let all_catagory = localStorage.getItem("all_catagory");

                if (all_catagory == null) {
                    all_catagory = [];
                } else {
                    all_catagory = JSON.parse(all_catagory);
                }
                let data = {
                    id,
                    catagory,
                    Created_On
                };

                console.log(data);
                all_catagory.push(data);

                all_catagory = JSON.stringify(all_catagory);

                localStorage.setItem("all_catagory", all_catagory);
                //array all_catagory

                localStorage.setItem("user", JSON.stringify(data));
                //object user

                return false;
            }
        </script>
</body>

</html>